<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="Personal Data Science Blog of Nate Hall">
    <meta name="author" content="Nate Hall">
    <link rel="icon" href="../favicon.ico">

    <title>Billboard Analysis - Article</title>

    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>
        window.jQuery || document.write('<script src="../theme/js/jquery.min.js"><\/script>')
    </script>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="../theme/css/bootstrap.css" />
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link rel="stylesheet" type="text/css" href="../theme/css/ie10-viewport-bug-workaround.css" />
    <!-- Custom styles for this template -->
    <link rel="stylesheet" type="text/css" href="../theme/css/style.css" />
    <link rel="stylesheet" type="text/css" href="../theme/css/notebooks.css" />
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
        

    <meta name="tags" content="Article" />


</head>

<body>

    <div class="navbar navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href=".." style="margin-top: 5px;">INSTANTI-NATE</a>
            </div>
            <div class="navbar-collapse collapse" id="searchbar">

                <ul class="nav navbar-nav navbar-right" style="margin-top: 15px;">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">About<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="../pages/about.html">About Nate</a></li>
                            <li><a href="https://github.com/nathan-hall/nathan-hall.github.io">GitHub</a></li>
                            <li><a href="https://www.linkedin.com/in/nathan-hall-a3ba833a">LinkedIn</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Data Science<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="..#Python">Python</a></li>
                            <li><a href="..#R_Stats">Pandas</a></li>
                            <!--<li><a href="..#Regex">Regex</a></li>-->
                            <li><a href="..#Command_Line">Command Line</a></li>
                            <li><a href="..#Project_Juypter">Juypter Notebook</a></li>
                            <!--<li><a href="..#SQL">SQL</a></li>-->
                            <!--<li><a href="..#Mathematics">Mathematics</a></li>
                            <li><a href="..#Javascript">Javascript</a></li>
                            <li><a href="..#Probability">Probability</a></li>-->
                            <li><a href="..#Frequentist_Statistics">Frequentist Statistics</a></li>
                            <!--<li><a href="..#Bayesian_Statistics">Bayesian Statistics</a></li>-->
                            <li><a href="..#Machine_Learning">Machine Learning</a></li>
                            <li><a href="..#GitHub">GitHub</a></li>
                            <!--<li><a href="..#Articles">Articles</a></li>-->
                            <li><a href="..#Projects">Projects</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Visuals<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="...">...</a></li>
                        </ul>
                    </li>
                </ul>

                <form class="navbar-form" action="../search.html" onsubmit="return validateForm(this.elements['q'].value);">
                    <div class="form-group" style="display:inline;">
                        <div class="input-group" style="display:table;">
                            <span class="input-group-addon" style="width:1%;"><span class="glyphicon glyphicon-search"></span></span>
                            <input class="form-control search-query" name="q" id="tipue_search_input" placeholder="e.g. scikit KNN, pandas merge" required autocomplete="off" type="text">
                        </div>
                    </div>
                </form>

            </div>
            <!--/.nav-collapse -->
        </div>
    </div>



    <!-- end of header section -->
    <div class="container">
<!-- <div class="alert alert-warning" role="alert">
    Did you find this page useful? Please do me a quick favor and <a href="#" class="alert-link">endorse me for data science on LinkedIn</a>.
</div> -->
<section id="content" class="body">
    <header>
    <h1>
      Billboard Analysis
    </h1>
<ol class="breadcrumb">
    <li>
        <time class="published" datetime="2016-11-23T12:00:00-05:00">
            23 November 2016
        </time>
    </li>
    <li>Article</li>
    <li>Article</li>
</ol>
</header>
<div class='article_content'>
<h2>Here is some open ended analysis using pandas to show the power of this library for handling literally anything that can be thrown at it.</h2>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
</pre></div>


<h3>Pandas to read in data</h3>
<div class="codehilite"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../data/billboard.csv&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>artist.inverted</th>
      <th>track</th>
      <th>time</th>
      <th>genre</th>
      <th>date.entered</th>
      <th>date.peaked</th>
      <th>x1st.week</th>
      <th>x2nd.week</th>
      <th>x3rd.week</th>
      <th>...</th>
      <th>x67th.week</th>
      <th>x68th.week</th>
      <th>x69th.week</th>
      <th>x70th.week</th>
      <th>x71st.week</th>
      <th>x72nd.week</th>
      <th>x73rd.week</th>
      <th>x74th.week</th>
      <th>x75th.week</th>
      <th>x76th.week</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2000</td>
      <td>Destiny's Child</td>
      <td>Independent Women Part I</td>
      <td>3:38</td>
      <td>Rock</td>
      <td>2000-09-23</td>
      <td>2000-11-18</td>
      <td>78</td>
      <td>63.0</td>
      <td>49.0</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2000</td>
      <td>Santana</td>
      <td>Maria, Maria</td>
      <td>4:18</td>
      <td>Rock</td>
      <td>2000-02-12</td>
      <td>2000-04-08</td>
      <td>15</td>
      <td>8.0</td>
      <td>6.0</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2000</td>
      <td>Savage Garden</td>
      <td>I Knew I Loved You</td>
      <td>4:07</td>
      <td>Rock</td>
      <td>1999-10-23</td>
      <td>2000-01-29</td>
      <td>71</td>
      <td>48.0</td>
      <td>43.0</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2000</td>
      <td>Madonna</td>
      <td>Music</td>
      <td>3:45</td>
      <td>Rock</td>
      <td>2000-08-12</td>
      <td>2000-09-16</td>
      <td>41</td>
      <td>23.0</td>
      <td>18.0</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2000</td>
      <td>Aguilera, Christina</td>
      <td>Come On Over Baby (All I Want Is You)</td>
      <td>3:38</td>
      <td>Rock</td>
      <td>2000-08-05</td>
      <td>2000-10-14</td>
      <td>57</td>
      <td>47.0</td>
      <td>45.0</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 83 columns</p>
</div>

<h3>Renaming column names</h3>
<div class="codehilite"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.week&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;st&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;nd&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;rd&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;th&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<span class="c1">#df.columns = ufo.columns.str.replace(&#39; &#39;, &#39;_&#39;)</span>
</pre></div>


<h3>Describe your data: check the value counts + descrisptive stats</h3>
<div class="codehilite"><pre><span></span><span class="c1">#We will first drop &#39;year&#39; since all the songs are from 2000</span>
<span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="c1">#basic describe</span>
<span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>


<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>9</th>
      <th>10</th>
      <th>...</th>
      <th>67</th>
      <th>68</th>
      <th>69</th>
      <th>70</th>
      <th>71</th>
      <th>72</th>
      <th>73</th>
      <th>74</th>
      <th>75</th>
      <th>76</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>317.000000</td>
      <td>312.000000</td>
      <td>307.000000</td>
      <td>300.000000</td>
      <td>292.000000</td>
      <td>280.000000</td>
      <td>269.000000</td>
      <td>260.000000</td>
      <td>253.000000</td>
      <td>244.000000</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>79.958991</td>
      <td>71.173077</td>
      <td>65.045603</td>
      <td>59.763333</td>
      <td>56.339041</td>
      <td>52.360714</td>
      <td>49.219331</td>
      <td>47.119231</td>
      <td>46.343874</td>
      <td>45.786885</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>std</th>
      <td>14.686865</td>
      <td>18.200443</td>
      <td>20.752302</td>
      <td>22.324619</td>
      <td>23.780022</td>
      <td>24.473273</td>
      <td>25.654279</td>
      <td>26.370782</td>
      <td>27.136419</td>
      <td>28.152357</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>min</th>
      <td>15.000000</td>
      <td>8.000000</td>
      <td>6.000000</td>
      <td>5.000000</td>
      <td>2.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>74.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>81.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>91.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>max</th>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>99.000000</td>
      <td>100.000000</td>
      <td>99.000000</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>8 rows × 76 columns</p>
</div>

<div class="codehilite"><pre><span></span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;arti.inverted&#39;</span><span class="p">,</span> <span class="s1">&#39;track&#39;</span><span class="p">,</span> <span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="s1">&#39;genre&#39;</span><span class="p">,</span> <span class="s1">&#39;date.entered&#39;</span><span class="p">,</span><span class="s1">&#39;date.peaked&#39;</span><span class="p">],</span>
                  <span class="n">var_name</span><span class="o">=</span><span class="s1">&#39;week&#39;</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s1">&#39;rank&#39;</span><span class="p">)</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1">#checking function that was run</span>
<span class="k">print</span> <span class="n">df2</span><span class="o">.</span><span class="n">shape</span>
<span class="k">print</span> <span class="n">df2</span><span class="o">.</span><span class="n">columns</span>
</pre></div>


<div class="codehilite"><pre><span></span>(24092, 8)
Index([u&#39;arti.inverted&#39;, u&#39;track&#39;, u&#39;time&#39;, u&#39;genre&#39;, u&#39;date.entered&#39;,
       u&#39;date.peaked&#39;, u&#39;week&#39;, u&#39;rank&#39;],
      dtype=&#39;object&#39;)
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1">#We now the data formated to plot ranking over time for each track.</span>
<span class="c1">#We will use other methods to determine which tracks to plot.</span>
<span class="n">df3</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="n">df2</span><span class="p">[</span><span class="s1">&#39;track&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;I Wanna Know&#39;</span><span class="p">]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df3</span><span class="p">[</span><span class="s1">&#39;rank&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Weekly Rank&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">18000</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>


<p><img alt="png" src="output_11_0.png" /></p>
<h4>Future Exploratory options... the world is yours with pandas.</h4>
<ul>
<li>Look at time it takes to get to the top. (time entered, to time peak)</li>
<li>Also add a column called time in top 100.</li>
<li>Compare the three columns.</li>
</ul>
<h3>That was interesting... now lets wrangle this dataset for some cool correlations.</h3>
<h1>Data wrangling for the most correlated genres</h1>
<div class="codehilite"><pre><span></span><span class="c1">#create a new dataframe for manipulation.</span>
<span class="n">df7</span> <span class="o">=</span> <span class="n">df2</span>
</pre></div>


<h3>Group the data</h3>
<div class="codehilite"><pre><span></span><span class="n">df7</span> <span class="o">=</span> <span class="n">df7</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;week&#39;</span> <span class="p">,</span> <span class="s1">&#39;genre&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="c1">#check that the group by function worked.</span>
<span class="n">df7</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>week</th>
      <th>genre</th>
      <th>rank</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Country</td>
      <td>82.405405</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>Electronica</td>
      <td>84.500000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>Gospel</td>
      <td>76.000000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>Jazz</td>
      <td>89.000000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>Latin</td>
      <td>73.222222</td>
    </tr>
  </tbody>
</table>
</div>

<h3>Create a pivot table</h3>
<div class="codehilite"><pre><span></span><span class="c1">#Use the pivot table function to get to something that can be correlated.</span>
<span class="n">df7</span> <span class="o">=</span> <span class="n">df7</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;week&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;genre&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;rank&#39;</span><span class="p">)</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1">#Moving the week column from the index back into a column position on the data table.</span>
<span class="n">df7</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">df7</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>


<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>genre</th>
      <th>week</th>
      <th>Country</th>
      <th>Electronica</th>
      <th>Gospel</th>
      <th>Jazz</th>
      <th>Latin</th>
      <th>Pop</th>
      <th>R&amp;B</th>
      <th>Rap</th>
      <th>Reggae</th>
      <th>Rock</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>82.405405</td>
      <td>84.500000</td>
      <td>76.0</td>
      <td>89.0</td>
      <td>73.222222</td>
      <td>79.222222</td>
      <td>84.086957</td>
      <td>85.172414</td>
      <td>72.0</td>
      <td>76.116788</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10</td>
      <td>52.377049</td>
      <td>55.750000</td>
      <td>59.0</td>
      <td>NaN</td>
      <td>43.250000</td>
      <td>43.571429</td>
      <td>63.866667</td>
      <td>53.380952</td>
      <td>75.0</td>
      <td>35.895238</td>
    </tr>
    <tr>
      <th>2</th>
      <td>11</td>
      <td>51.016949</td>
      <td>53.250000</td>
      <td>66.0</td>
      <td>NaN</td>
      <td>49.625000</td>
      <td>50.142857</td>
      <td>62.538462</td>
      <td>52.538462</td>
      <td>84.0</td>
      <td>36.048077</td>
    </tr>
    <tr>
      <th>3</th>
      <td>12</td>
      <td>50.714286</td>
      <td>59.750000</td>
      <td>68.0</td>
      <td>NaN</td>
      <td>35.285714</td>
      <td>58.250000</td>
      <td>67.000000</td>
      <td>50.000000</td>
      <td>92.0</td>
      <td>33.734694</td>
    </tr>
    <tr>
      <th>4</th>
      <td>13</td>
      <td>52.301887</td>
      <td>49.333333</td>
      <td>61.0</td>
      <td>NaN</td>
      <td>39.285714</td>
      <td>58.333333</td>
      <td>59.666667</td>
      <td>53.235294</td>
      <td>85.0</td>
      <td>34.125000</td>
    </tr>
  </tbody>
</table>
</div>

<div class="codehilite"><pre><span></span><span class="c1">#Sorting the data inside week after it is converted to a string.</span>
<span class="n">df7</span><span class="p">[</span><span class="s1">&#39;week&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df7</span><span class="o">.</span><span class="n">week</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">df7</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;week&#39;</span><span class="p">)</span>
<span class="n">df7</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div class="codehilite"><pre><span></span>/anaconda/lib/python2.7/site-packages/ipykernel/__main__.py:3: FutureWarning: sort(columns=....) is deprecated, use sort_values(by=.....)
  app.launch_new_instance()
</pre></div>


<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>genre</th>
      <th>week</th>
      <th>Country</th>
      <th>Electronica</th>
      <th>Gospel</th>
      <th>Jazz</th>
      <th>Latin</th>
      <th>Pop</th>
      <th>R&amp;B</th>
      <th>Rap</th>
      <th>Reggae</th>
      <th>Rock</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>82.405405</td>
      <td>84.500000</td>
      <td>76.0</td>
      <td>89.0</td>
      <td>73.222222</td>
      <td>79.222222</td>
      <td>84.086957</td>
      <td>85.172414</td>
      <td>72.0</td>
      <td>76.116788</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10</td>
      <td>52.377049</td>
      <td>55.750000</td>
      <td>59.0</td>
      <td>NaN</td>
      <td>43.250000</td>
      <td>43.571429</td>
      <td>63.866667</td>
      <td>53.380952</td>
      <td>75.0</td>
      <td>35.895238</td>
    </tr>
    <tr>
      <th>2</th>
      <td>11</td>
      <td>51.016949</td>
      <td>53.250000</td>
      <td>66.0</td>
      <td>NaN</td>
      <td>49.625000</td>
      <td>50.142857</td>
      <td>62.538462</td>
      <td>52.538462</td>
      <td>84.0</td>
      <td>36.048077</td>
    </tr>
    <tr>
      <th>3</th>
      <td>12</td>
      <td>50.714286</td>
      <td>59.750000</td>
      <td>68.0</td>
      <td>NaN</td>
      <td>35.285714</td>
      <td>58.250000</td>
      <td>67.000000</td>
      <td>50.000000</td>
      <td>92.0</td>
      <td>33.734694</td>
    </tr>
    <tr>
      <th>4</th>
      <td>13</td>
      <td>52.301887</td>
      <td>49.333333</td>
      <td>61.0</td>
      <td>NaN</td>
      <td>39.285714</td>
      <td>58.333333</td>
      <td>59.666667</td>
      <td>53.235294</td>
      <td>85.0</td>
      <td>34.125000</td>
    </tr>
  </tbody>
</table>
</div>

<div class="codehilite"><pre><span></span><span class="c1">#Remove the pesky column and index names that will mess up the correlation formula later.</span>
<span class="n">df7</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">df7</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">None</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1">#Remove the week column since we sorted by it already.</span>
<span class="n">df7</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;week&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="n">df7</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Country</th>
      <th>Electronica</th>
      <th>Gospel</th>
      <th>Jazz</th>
      <th>Latin</th>
      <th>Pop</th>
      <th>R&amp;B</th>
      <th>Rap</th>
      <th>Reggae</th>
      <th>Rock</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>82.405405</td>
      <td>84.500000</td>
      <td>76.0</td>
      <td>89.0</td>
      <td>73.222222</td>
      <td>79.222222</td>
      <td>84.086957</td>
      <td>85.172414</td>
      <td>72.0</td>
      <td>76.116788</td>
    </tr>
    <tr>
      <th>1</th>
      <td>52.377049</td>
      <td>55.750000</td>
      <td>59.0</td>
      <td>NaN</td>
      <td>43.250000</td>
      <td>43.571429</td>
      <td>63.866667</td>
      <td>53.380952</td>
      <td>75.0</td>
      <td>35.895238</td>
    </tr>
    <tr>
      <th>2</th>
      <td>51.016949</td>
      <td>53.250000</td>
      <td>66.0</td>
      <td>NaN</td>
      <td>49.625000</td>
      <td>50.142857</td>
      <td>62.538462</td>
      <td>52.538462</td>
      <td>84.0</td>
      <td>36.048077</td>
    </tr>
    <tr>
      <th>3</th>
      <td>50.714286</td>
      <td>59.750000</td>
      <td>68.0</td>
      <td>NaN</td>
      <td>35.285714</td>
      <td>58.250000</td>
      <td>67.000000</td>
      <td>50.000000</td>
      <td>92.0</td>
      <td>33.734694</td>
    </tr>
    <tr>
      <th>4</th>
      <td>52.301887</td>
      <td>49.333333</td>
      <td>61.0</td>
      <td>NaN</td>
      <td>39.285714</td>
      <td>58.333333</td>
      <td>59.666667</td>
      <td>53.235294</td>
      <td>85.0</td>
      <td>34.125000</td>
    </tr>
  </tbody>
</table>
</div>

<h1>Data wrangling for the most correlated artist rankings</h1>
<div class="codehilite"><pre><span></span><span class="n">df8</span> <span class="o">=</span> <span class="n">df2</span>
</pre></div>


<h3>Group the data</h3>
<div class="codehilite"><pre><span></span><span class="n">df8</span> <span class="o">=</span> <span class="n">df8</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;week&#39;</span> <span class="p">,</span> <span class="s1">&#39;arti.inverted&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">df8</span><span class="o">.</span><span class="n">shape</span>
</pre></div>


<div class="codehilite"><pre><span></span>(17328, 3)
</pre></div>


<div class="codehilite"><pre><span></span><span class="n">df8</span> <span class="o">=</span> <span class="n">df8</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">df8</span><span class="p">[</span><span class="s1">&#39;rank&#39;</span><span class="p">])]</span>
<span class="n">df8</span><span class="o">.</span><span class="n">shape</span>
</pre></div>


<div class="codehilite"><pre><span></span>(3989, 3)
</pre></div>


<div class="codehilite"><pre><span></span><span class="n">counts</span> <span class="o">=</span> <span class="n">df8</span><span class="p">[</span><span class="s1">&#39;arti.inverted&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1">##Removing any artists that have less than 15 datapoints on the rankings.</span>
<span class="n">df8</span> <span class="o">=</span> <span class="n">df8</span><span class="p">[</span><span class="n">df8</span><span class="p">[</span><span class="s1">&#39;arti.inverted&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="n">counts</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)]</span>
</pre></div>


<h3>Create a pivot table</h3>
<div class="codehilite"><pre><span></span><span class="n">df8</span> <span class="o">=</span> <span class="n">df8</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;week&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;arti.inverted&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;rank&#39;</span><span class="p">)</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1">#Moving the week column from the index back into a column position on the data table.</span>
<span class="n">df8</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1">#Sorting the data inside week after it is converted to a string.</span>
<span class="n">df8</span><span class="p">[</span><span class="s1">&#39;week&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df8</span><span class="o">.</span><span class="n">week</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">df8</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;week&#39;</span><span class="p">)</span>
<span class="n">df8</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div class="codehilite"><pre><span></span>/anaconda/lib/python2.7/site-packages/ipykernel/__main__.py:3: FutureWarning: sort(columns=....) is deprecated, use sort_values(by=.....)
  app.launch_new_instance()
</pre></div>


<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>arti.inverted</th>
      <th>week</th>
      <th>3 Doors Down</th>
      <th>Aaliyah</th>
      <th>Anthony, Marc</th>
      <th>BBMak</th>
      <th>Braxton, Toni</th>
      <th>Creed</th>
      <th>Destiny's Child</th>
      <th>Hill, Faith</th>
      <th>Joe</th>
      <th>Jordan, Montell</th>
      <th>Lonestar</th>
      <th>Nelly</th>
      <th>Pink</th>
      <th>Savage Garden</th>
      <th>Vertical Horizon</th>
      <th>matchbox twenty</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>78.5</td>
      <td>71.5</td>
      <td>79.5</td>
      <td>99.0</td>
      <td>79.0</td>
      <td>82.5</td>
      <td>78.333333</td>
      <td>82.0</td>
      <td>85.5</td>
      <td>92.0</td>
      <td>82.666667</td>
      <td>100.0</td>
      <td>55.0</td>
      <td>73.0</td>
      <td>67.0</td>
      <td>60.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10</td>
      <td>56.0</td>
      <td>23.0</td>
      <td>44.5</td>
      <td>18.0</td>
      <td>21.0</td>
      <td>65.5</td>
      <td>12.333333</td>
      <td>49.0</td>
      <td>53.0</td>
      <td>24.0</td>
      <td>33.333333</td>
      <td>36.0</td>
      <td>11.5</td>
      <td>16.5</td>
      <td>22.5</td>
      <td>12.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>11</td>
      <td>56.0</td>
      <td>23.0</td>
      <td>43.0</td>
      <td>19.0</td>
      <td>27.0</td>
      <td>63.5</td>
      <td>10.333333</td>
      <td>42.0</td>
      <td>52.5</td>
      <td>24.0</td>
      <td>33.000000</td>
      <td>37.0</td>
      <td>10.0</td>
      <td>19.0</td>
      <td>20.0</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>12</td>
      <td>55.0</td>
      <td>22.5</td>
      <td>43.5</td>
      <td>15.0</td>
      <td>29.0</td>
      <td>68.0</td>
      <td>7.666667</td>
      <td>46.0</td>
      <td>54.5</td>
      <td>20.0</td>
      <td>31.666667</td>
      <td>30.0</td>
      <td>11.0</td>
      <td>22.5</td>
      <td>19.0</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>13</td>
      <td>54.0</td>
      <td>22.0</td>
      <td>50.0</td>
      <td>18.0</td>
      <td>32.0</td>
      <td>70.5</td>
      <td>2.666667</td>
      <td>55.5</td>
      <td>54.0</td>
      <td>19.0</td>
      <td>35.000000</td>
      <td>23.0</td>
      <td>12.0</td>
      <td>25.0</td>
      <td>19.0</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div>

<div class="codehilite"><pre><span></span><span class="c1">#Remove the pesky column and index names that will mess up the correlation formula later.</span>
<span class="n">df8</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">df8</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">None</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="c1">#Remove the week column since we sorted by it already.</span>
<span class="n">df8</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;week&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>


<h1>Data wrangling for the most correlated song rankings</h1>
<p>How would you do this part?</p>
<div class="codehilite"><pre><span></span><span class="c1">#df9 = df2</span>
</pre></div>


<h2>Run a correlation function on the dataframes from the wrangling steps.</h2>
<p>This is a simple formula that I have been working to improve to work on any data set. It is designed to be a useful alternative to the spray and pray sns.pairplot or scatter matrix methods.
sns.pairplot (on df7) = 14s
corrr_pairs function (on df7) =384ms</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">corr_pairs</span><span class="p">(</span><span class="n">df_input</span><span class="p">,</span><span class="n">coef_percentile</span><span class="p">):</span> <span class="c1">#,mse_percentile</span>
    <span class="c1">#from sklearn.metrics import mean_squared_error</span>
    <span class="c1">#Get top correlated pairs using Pearson coefficient</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">df_input</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span>
    <span class="n">so</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;quicksort&quot;</span><span class="p">)</span>
    <span class="n">df_output</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">so</span><span class="o">.</span><span class="n">abs</span><span class="p">(),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;coef&#39;</span><span class="p">])</span>
    <span class="n">df_output</span> <span class="o">=</span> <span class="n">df_output</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    <span class="n">df_output</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="s1">&#39;coef&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">df_output</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="c1">#df_input = df_input.fillna(0.0)</span>
    <span class="c1">#Get mean squared error for better accuracy</span>
    <span class="c1">#mse_l = []</span>
    <span class="c1">#for i in range(len(df_output.iloc[:,0:2])):</span>
        <span class="c1">#mse_var = mean_squared_error(df_input[df_output.iloc[i,0]], df_input[df_output.iloc[i,1]])</span>
        <span class="c1">#mse_l.append(mse_var)</span>
    <span class="c1">#df_output[&#39;mse&#39;] = mse_l</span>
    <span class="c1">#Filter the results by both Coefficient and MSE for best pairs.</span>
    <span class="n">df_output</span> <span class="o">=</span> <span class="n">df_output</span><span class="p">[(</span><span class="n">df_output</span><span class="p">[</span><span class="s1">&#39;coef&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df_output</span><span class="o">.</span><span class="n">coef</span> <span class="o">&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">df_output</span><span class="p">[</span><span class="s1">&#39;coef&#39;</span><span class="p">],</span><span class="n">coef_percentile</span><span class="p">))]</span> <span class="c1">#&amp; (df_output.mse &lt; np.percentile(df_output[&#39;mse&#39;],mse_percentile))]</span>
    <span class="c1">#Plot the best pairs.</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df_output</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">])):</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df_output</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">df_output</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">df_input</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">colors</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">df_output</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">df_output</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">df_output</span>
</pre></div>


<h2>Showing the most correlated genres in the rankings</h2>
<div class="codehilite"><pre><span></span><span class="n">corr_pairs</span><span class="p">(</span><span class="n">df7</span><span class="p">,</span> <span class="mi">95</span><span class="p">)</span>
</pre></div>


<p><img alt="png" src="output_44_0.png" /></p>
<p><img alt="png" src="output_44_1.png" /></p>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>level_0</th>
      <th>level_1</th>
      <th>coef</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>86</th>
      <td>Electronica</td>
      <td>Country</td>
      <td>0.848179</td>
    </tr>
    <tr>
      <th>88</th>
      <td>Electronica</td>
      <td>R&amp;B</td>
      <td>0.913870</td>
    </tr>
  </tbody>
</table>
</div>

<h2>Showing the most correlated artists in the rankings</h2>
<div class="codehilite"><pre><span></span><span class="n">corr_pairs</span><span class="p">(</span><span class="n">df8</span><span class="p">,</span> <span class="mi">95</span><span class="p">)</span>
</pre></div>


<p><img alt="png" src="output_46_0.png" /></p>
<p><img alt="png" src="output_46_1.png" /></p>
<p><img alt="png" src="output_46_2.png" /></p>
<p><img alt="png" src="output_46_3.png" /></p>
<p><img alt="png" src="output_46_4.png" /></p>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>level_0</th>
      <th>level_1</th>
      <th>coef</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>230</th>
      <td>Creed</td>
      <td>Joe</td>
      <td>0.909992</td>
    </tr>
    <tr>
      <th>232</th>
      <td>Savage Garden</td>
      <td>Aaliyah</td>
      <td>0.949246</td>
    </tr>
    <tr>
      <th>234</th>
      <td>BBMak</td>
      <td>matchbox twenty</td>
      <td>0.954013</td>
    </tr>
    <tr>
      <th>236</th>
      <td>matchbox twenty</td>
      <td>Destiny's Child</td>
      <td>0.965130</td>
    </tr>
    <tr>
      <th>238</th>
      <td>Destiny's Child</td>
      <td>BBMak</td>
      <td>0.982112</td>
    </tr>
  </tbody>
</table>
</div>

<h2>Showing the most correlated songs in the rankings</h2>
<p>How would you do this part?</p>
</div>
    <aside>
    <div class="bug-reporting__panel">
        <h3>Find an error or bug? Have a suggestion?</h3>
        <p>See the code to <a href='https://github.com/nathan-hall/nathan-hall.github.io'>submit an issue.</a></p>
    </div>
    </aside>
</section>

    </div>
    <!-- start of footer section -->
    <!--<footer class="footer">
        <div class="container">
            <p class="text-muted">
                <center>This project contains 7 pages and is available on <a href="https://github.com/nathan-hall/nathan-hall.github.io">Github</a>.
                <br/>
                Copyright &copy; Nate Hall
                    <time datetime="2016">2016</time>.
                </center>
            </p>
        </div>
    </footer>-->

    <!-- This jQuery line finds any span that contains code highlighting classes and then selects the parent <pre> tag and adds a border. This is done as a workaround to visually distinguish the code inputs and outputs -->
    <script>
        $( ".hll, .n, .c, .err, .k, .o, .cm, .cp, .c1, .cs, .gd, .ge, .gr, .gh, .gi, .go, .gp, .gs, .gu, .gt, .kc, .kd, .kn, .kp, .kr, .kt, .m, .s, .na, .nb, .nc, .no, .nd, .ni, .ne, .nf, .nl, .nn, .nt, .nv, .ow, .w, .mf, .mh, .mi, .mo, .sb, .sc, .sd, .s2, .se, .sh, .si, .sx, .sr, .s1, .ss, .bp, .vc, .vg, .vi, .il" ).parent( "pre" ).css( "border", "1px solid #DEDEDE" );
    </script>

    <!-- Load Google Analytics -->
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-87671349-1', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- End of Google Analytics -->

    <!-- Bootstrap core JavaScript
      ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../theme/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../theme/js/ie10-viewport-bug-workaround.js"></script>
</body>

</html>